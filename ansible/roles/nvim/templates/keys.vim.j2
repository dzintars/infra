" ===== NERDTree =====
map <C-n> :NERDTreeToggle<CR>
nnoremap <Leader>pt :NERDTreeToggle<CR>
nnoremap <silent> <expr> <Leader>n g:NERDTree.IsOpen() ? "\:NERDTreeClose<CR>" : bufexists(expand('%')) ? "\:NERDTreeFind<CR>" : "\:NERDTree<CR>"

" ===== FZF =====
nnoremap <silent> <C-f> :Files<CR>
"nnoremap <silent> <C-g> :GFiles<CR>
nnoremap <silent> <C-b> :Buffers<CR>
nnoremap <Leader>g :Rg<CR>
nnoremap <Leader>t :Tags<CR>
nnoremap <Leader>m :Marks<CR>

" Default extra key bindings
let g:fzf_action = {
  \ 'ctrl-t': 'tab split',
  \ 'ctrl-x': 'split',
  \ 'ctrl-v': 'vsplit',
  \ }

xnoremap <C-h> <C-w>h
xnoremap <C-j> <C-w>j
xnoremap <C-k> <C-w>k
xnoremap <C-l> <C-w>l

" ===== Move lines vertically in visual and select mode =====
"xnoremap <A-j> :m '<+1<CR>gv=gv
"xnoremap <A-k> :m '<-2<CR>gv=gv

" Move VISUAL LINE selection within buffer. https://youtu.be/X5IAdaN6IwM
"xnoremap <silent> J :call move_down()<CR>
"xnoremap <silent> K :call move_up()<CR>

"nnoremap <silent><A-j> :set paste<CR>m`o<Esc>``:set nopaste<CR>
"nnoremap <silent><A-k> :set paste<CR>m`O<Esc>``:set nopaste<CR>

" ===== Clipboard =====
" Clipboard in the Wayland is tricky
" https://www.reddit.com/r/vim/comments/hge0qw/for_those_who_are_still_struggling_with_waylands/

" vmap <silent> y y:call system("wl-copy", @@)<CR>

" if !empty($WAYLAND_DISPLAY)
"   let g:clipboard = {
"     \   'name': 'wayland-strip-carriage',
"     \   'copy': {
"     \      '+': 'wl-copy --foreground --type text/plain',
"     \      '*': 'wl-copy --foreground --type text/plain --primary',
"     \    },
"     \   'paste': {
"     \      '+': {-> systemlist('wl-paste --no-newline | tr -d "\r"')},
"     \      '*': {-> systemlist('wl-paste --no-newline --primary | tr -d "\r"')},
"     \   },
"     \   'cache_enabled': 1,
"     \ }
" endif
